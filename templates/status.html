{%extends 'student_base.html'%}

{% block student %}
    <a href="{{url_for('student',roll=data['roll'])}}"><h1><b>STUDENT PAGE</b></h1></a>
{% endblock %}

{% block appointments %}
    <a href="{{url_for('appointments',roll=data['roll'])}}"><b>Appointments</b></a>
{% endblock %}

{% block status %}
    <a href="{{url_for('status',roll=data['roll'])}}"><b>Status</b></a>
{% endblock %}

{% block change_password_stu %}
    <a href="{{url_for('change_password_stu',roll=data['roll'])}}">change password</a>
{% endblock %}

{%block content%}
         <h2 align="center"><b>Status Page</b></h2>
         <h3 align="center"> Your appointment status</h3>
         <br>
         <div class="container" align="center">
            <table class="table table-striped" style="width:50% !important">
                    <tr>
                        <th> </th>
                        <th>Teacher</th>
                        <th>Day</th>
                        <th>Time</th>
                        <th>Status</th>
                        <th>Cancel?</th>
                        <th> </th>
                    </tr>
                    <form method="POST">
                    {% set ns=namespace(count=0) %}
                    {% for fac in data["fac"] %}
                        {% for slot,stat in fac.items() %}
                            {% if slot not in ["user_name","name"] %}
                                <tr>
                                {% set roll="roll"+ns.count|string() %}
                                {% set day="day"+ns.count|string() %}
                                {% set time="time"+ns.count|string() %}
                                {% set cancel="cancel"+ns.count|string() %}
                                {% set user_name="user_name"+ns.count|string() %}
                                <td><input type="text" name={{roll}} value="{{data['roll']}}" style="display: none" size="0" readonly></td>
                                <td><input type="text" name="name" value="{{fac['name']}}" style="border: none" size="10" readonly></td>
                                <td><input type="text" name={{day}} value="{{slot}}" style="border: none" size="3" readonly></td>
                                <td><input type="text" name={{time}} value="{{stat['time']}}" style="border: none" size="3" readonly></td>
                                <td><input type="text" name="status" value="{{stat['status']}}" style="border: none" size="10" readonly></td>
                                {% if stat['status'] not in ["canceled","inactive"] %}
                                    <td><input type="submit" name={{cancel}} value="cancel"></td>
                                {% else %}
                                    <td><input type="submit" name="cancel" value="cancel" disabled></td>
                                {% endif %}
                                <td><input type="text" name={{user_name}} value="{{fac['user_name']}}" style="display: none" size="0" readonly></td>
                                <tr>
                            {% endif %}
                            {% set ns.count=ns.count+1 %}
                        {% endfor %}
                    {% endfor %}
                    </form>
             </table>
         </div>
{%endblock%}